<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
>
<ui:composition template="templates/masterTemplate.xhtml">
<ui:define name="title">Handicap List Page </ui:define>
<ui:define name="help">
    <ui:include src="/help/help_show_handicap.xhtml"/>
</ui:define>
<ui:define name="content">
<!--    
<ui:define name="metadata">
    <f:metadata>
        <f:viewParam
            required="true"
            name="cmd"
            value="#{courseC.inputHandicap}"
            requiredMessage="You did not specify a cmd. (The id parameter is missing)"
            converterMessage="Invalid cmd. (The id parameter is not a number)"
            validatorMessage="Invalid cmd. (The cmd parameter is not a positive number, minimum 3 length)">
            <f:validateLength minimum="3" />
        </f:viewParam>
    </f:metadata>
</ui:define>
-->
<h:form id="form_handicap">
<ui:include src="include/include_messages.xhtml"/>

<p:dataTable id="table_handicap"
             value="#{courseC.listHandicaps()}"
             var="c"
             selection="#{courseC.selectedHandicap}"
             rowKey="#{c.handicap.handicapStart}"
             rowIndexVar="row"
             resizableColumns="true"
             filteredValue="#{courseC.filteredHandicaps}"
              >
<f:facet name="header">
            <p:commandButton 
                        id="handicapButton"
                        actionListener="#{dialogC.viewHandicap()}"
                        icon="ui-icon-extlink"
                        value="View Detail Hcp"
                        style="float:left"
                        onmouseover="this.style.cursor='default';this.style.backgroundColor='#F1F1F1';" 
                        >
                <p:ajax event="dialogReturn"
                        update=":form_handicap:growl-msg"
                        listener="#{dialogC.onDialogReturn()}"/>
            </p:commandButton>
            <p:commandButton 
                id="showChart"
                action="statChartHandicap.xhtml"
                icon="fa fa-line-chart"
                value="View Chart"
                style="float:right">
            </p:commandButton>

                <h1> #{msg['handicap.data']} : #{courseC.player.playerFirstName},
                                       #{courseC.player.playerLastName} (#{courseC.player.idplayer})</h1>
</f:facet>

<p:columnGroup type="header" >
    <p:row>
            <p:column colspan="2"
                      headerText="View Detail"
                      style="width:5%"
                      styleClass="columnborder1"
                      />
            <p:column colspan="3"
                      headerText="Handicap"
                      style="width:30%"
                      styleClass="columnborder2" />
            <p:column colspan="4"
                      headerText="#{msg['round.result.stableford']}"
                      style="width:65%"
                      styleClass="columnborder1" />
    </p:row>
    <p:row>
            <p:column headerText="View" selectionMode="single" style="width:2%"/>
            <p:column headerText="#" style="border-right-width:5px;width:2%;" />
            
            <p:column headerText="#{msg['handicap.player']}"   style="white-space:pre-line;width:10%" />
            <p:column headerText="#{msg['handicap.start']}"    style="white-space:pre-line;width:10%" />
            <p:column headerText="#{msg['handicap.canceled']}" style="border-right-width:5px;white-space:pre-line;width:50%"/>
            
            <p:column headerText="#{msg['round.date']}"        style="white-space:pre-line;width:50%"/>
            <p:column headerText="#{msg['playerhasround.result']}" style="width:5%"/>
            <p:column headerText="#{msg['round.competition']}" style="width:10%" />
            <p:column headerText="#{msg['course.name']}"       style="width:10%" />
    </p:row>
</p:columnGroup>

<!-- data columns colspan 1 -->
<p:column
    id="singlerow"
    selectionMode="single"
    style="text-align:center"
    />

<p:column

     style="text-align:center"
     id="rrow">
             #{row+1}
</p:column>

<p:column>
   #{c.handicap.handicapPlayer}
</p:column>

<p:column>
    <h:outputText value="#{c.handicap.handicapStart}">
        <f:convertDateTime pattern="dd-MM-yyyy" />
   </h:outputText>
</p:column>

<!-- new 05/09/2017-->
        <p:column>
            <p:commandButton
                id="cancelButton"
                actionListener="#{courseC.cancelHandicap(c)}"
                value="#{msg['button.delete']} "
                icon="fa fa-trash-o fa-lg colorDelete1"
                update="messages"
                >
                <p:confirm header="#{msg['message.confirm']}"
                           message="#{msg['message.cancel']}" 
                           icon="fa fa-exclamation-triangle"
                           severity="alert"/>
            </p:commandButton>
	</p:column>


<!--
- #{c.idhandicap}
             rendered="#{c.playerhasroundFinalResult eq 0}"
<h:outputText value="No delete : score already registered"
                rendered="#{c.playerhasroundFinalResult gt 0}"
                style="font-weight:bold;color:red" />
-->


<p:column>
   <h:outputText value="#{c.round.roundDate}"
       >
       <f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
   </h:outputText>
</p:column>


<p:column>
   #{c.inscription.playerhasroundFinalResult}
</p:column>

<p:column>
   #{c.round.roundCompetition}
</p:column>

<p:column>
  #{c.course.courseName}
</p:column>
    <f:facet name="footer"> 
        Historique Handicap
    </f:facet>  

<p:columnGroup type="footer">

    <p:row>
            <p:column footerText="View" style="width:2%"/>
            <p:column footerText="#"    style="width:2%"/>
            
            <p:column footerText="#{msg['handicap.player']}"    style="white-space:pre-line;width:10%" />
            <p:column footerText="#{msg['handicap.start']}"     style="white-space:pre-line;width:10%" />
            <p:column footerText="#{msg['handicap.canceled']}"  style="white-space:pre-line;width:50%"/>
            
            <p:column footerText="#{msg['round.date']}"         style="white-space:pre-line;width:10%"/>
            <p:column footerText="#{msg['playerhasround.result']}" style="width:5%"/>
            <p:column footerText="#{msg['round.competition']}" style="width:10%" />
            <p:column footerText="#{msg['course.name']}"       style="width:10%" />
    </p:row>
</p:columnGroup>

</p:dataTable>

    <p:commandButton id="btn"
                     value="#{msg['button.print']}"
                     type="button"
                     icon="ui-icon-print"
                     >
        <p:printer target="form_handicap" />
    </p:commandButton>

<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check-square-o" />
        <p:commandButton value="No"  type="button" styleClass="ui-confirmdialog-no"  icon="fa fa-close" />
</p:confirmDialog>

</h:form>
</ui:define>
</ui:composition>
</html>